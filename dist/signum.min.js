!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.signum=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){module.exports=function(){return Signum};var Signum=new function(){this.ws=void 0,this.conected=!1,this.sessionId=void 0,this.events=new Events;var self=this;this.open=function(url,licenceKey,callback,errorCallback){$.ajax({type:"POST",url:url+"/session/new",data:{licenceKey:licenceKey},success:function(data){self.sessionId=data.response_object.id,self.openSocket(url,callback,errorCallback)},error:function(){errorCallback({error_code:1,error_mensagem:"Nao foi possivel estabelecer conexao com signum"})}})},this.openSocket=function(url,callback,errorCallback){self.ws=new WebSocket(url.replace("http","ws")+"/signum"),self.ws.onopen=function(){self.conected=!0,self.events.emit("signum_connection_opened"),callback()},this.ws.onmessage=function(e){self.events.emit("signum_onmessage",e.data);var msg=JSON.parse(e.data);"new_session"==msg.response_id?(self.events.emit("signum_new_session",msg),self.sessionId=msg.response_object.id):"list_ok"==msg.response_id?self.events.emit("signum_list_ok",msg):"hello"==msg.response_id?self.events.emit("signum_hello",msg):"signum_list_in_processing"==msg.response_id?self.events.emit("signum_list_in_processing",msg):"login_ok"==msg.response_id?self.events.emit("signum_login_ok",msg):"sign_ok"==msg.response_id?self.events.emit("signum_sign_ok",msg):"sign_xml_ok"==msg.response_id?self.events.emit("signum_sign_xml_ok",msg):"pin_requested"==msg.response_id?self.events.emit("signum_pin_requested",msg):"error"==msg.response_id&&(self.events.emit("signum_error",msg),errorCallback(msg))},this.ws.onclose=function(){self.conected=!1,self.events.emit("signum_connection_closed")}},this.new_session=function(callback){self.ws.send('{"message_id":"new_session","session_id":"'+self.sessionId+'"}'),self.events.on("signum_new_session",callback)},this.use_session=function(){},this.list=function(pinCallback,listCallback){self.ws.send('{"message_id":"list","session_id":"'+self.sessionId+'"}'),self.events.on("signum_pin_requested",pinCallback),self.events.on("signum_list_ok",listCallback)},this.load_a1=function(content,pin,callback){self.ws.send('{"message_id":"load_a1","session_id":"'+self.sessionId+'","content":"'+content+'","pin":"'+pin+'"}'),self.events.on("signum_list_ok",callback)},this.login=function(){},this.hello=function(callback){self.ws.send('{"message_id":"hello","session_id":"'+self.sessionId+'"}'),self.events.on("signum_hello",callback)},this.setPin=function(pin){self.ws.send('{"message_id":"pin","session_id":"'+self.sessionId+'","pin":"'+pin+'"}')},this.login=function(alias,token,callback){self.events.on("signum_login_ok",callback),self.ws.send('{"message_id":"login","session_id":"'+self.sessionId+'","alias":"'+alias+'","token":"'+token+'"}')},this.sign=function(alias,content,contentName,contentId,callback){self.events.on("signum_sign_ok",callback),self.ws.send('{"message_id":"sign","session_id":"'+self.sessionId+'","alias":"'+alias+'","content":"'+content+'","content_name":"'+contentName+'","content_id":"'+contentId+'"}')},this.sign_xml=function(alias,content,contentName,contentId,callback){self.events.on("signum_sign_xml_ok",callback),self.ws.send('{"message_id":"sign_xml","session_id":"'+self.sessionId+'","alias":"'+alias+'","content":"'+content+'","content_name":"'+contentName+'","content_id":"'+contentId+'"}')}}},{}]},{},[1])(1)});